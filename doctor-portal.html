<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Doctor Portal - HMS</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    header { background: #0078d4; color: white; padding: 15px; }
    nav a, nav button { margin: 0 10px; color: white; text-decoration: none; }
    nav button { background: #e81123; border: none; padding: 5px 10px; cursor: pointer; }
    main { padding: 20px; }
    section { display: none; }
    section.active { display: block; }
    label { display: block; margin-top: 10px; }
    input { width: 100%; padding: 5px; margin-top: 4px; }
    button.save { margin-top: 12px; background: #0078d4; color: white; border: none; padding: 8px 12px; cursor: pointer; }
  </style>
</head>
<body>
  <header>
    <h1>Doctor Portal</h1>
    <nav>
      <a href="#" onclick="showSection('dashboard')">Dashboard</a>
      <a href="#" onclick="showSection('profile')">My Profile</a>
      <a href="#" onclick="showSection('appointments')">Appointments</a>
      <button onclick="logout()">Logout</button>
    </nav>
  </header>

  <main>
    <!-- Dashboard -->
    <section id="dashboard" class="active">
      <h2>Welcome, <span id="doctorName"></span> üë®‚Äç‚öïÔ∏è</h2>
      <p>Here is your dashboard overview.</p>
    </section>

    <!-- Profile (editable) -->
    <section id="profile">
      <h2>My Profile</h2>
      <form id="profileForm">
        <label>Name:</label>
        <input type="text" id="profileName">

        <label>Degree:</label>
        <input type="text" id="profileDegree">

        <label>Specialization:</label>
        <input type="text" id="profileSpecialization">

        <label>Experience (years):</label>
        <input type="number" id="profileExperience">

        <button type="submit" class="save">Save Profile</button>
      </form>
    </section>

    <!-- Appointments -->
    <section id="appointments">
      <h2>Appointments</h2>
      <ul id="appointmentsList">
        <li>Patient A - 9:00 AM</li>
        <li>Patient B - 11:00 AM</li>
      </ul>
    </section>
  </main>

  <script>
    // Check if doctor is logged in
    const loggedInUser = localStorage.getItem("loggedInUser");
    const role = localStorage.getItem("userRole");
    let users = JSON.parse(localStorage.getItem("users")) || [];

    if (!loggedInUser || role !== "doctor") {
      alert("Unauthorized! Please log in as a doctor.");
      window.location.href = "login.html";
    }

    // Get doctor data
    let doctor = users.find(u => u.username === loggedInUser && u.role === "doctor");

    // Fill dashboard
    document.getElementById("doctorName").innerText = doctor.username;

    // Fill profile form
    document.getElementById("profileName").value = doctor.username;
    document.getElementById("profileDegree").value = doctor.degree || "";
    document.getElementById("profileSpecialization").value = doctor.specialization || "";
    document.getElementById("profileExperience").value = doctor.experience || "";

    // Save profile updates
    document.getElementById("profileForm").addEventListener("submit", function(e) {
      e.preventDefault();

      doctor.username = document.getElementById("profileName").value;
      doctor.degree = document.getElementById("profileDegree").value;
      doctor.specialization = document.getElementById("profileSpecialization").value;
      doctor.experience = document.getElementById("profileExperience").value;

      // Update localStorage
      localStorage.setItem("users", JSON.stringify(users));
      localStorage.setItem("loggedInUser", doctor.username);

      alert("Profile updated successfully!");
      document.getElementById("doctorName").innerText = doctor.username;
    });

    // Navigation
    function showSection(id) {
      document.querySelectorAll("main section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      localStorage.removeItem("userRole");
      window.location.href = "login.html";
    }
  </script>
</body>
</html>
