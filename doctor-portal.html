<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Doctor Portal - Hospital Management System</title>
<style>
  body { font-family: sans-serif; margin:0; padding:0; background:#f4f4f4; }
  header { background:#1f3c88; color:#fff; padding:20px; text-align:center; }
  header h1 { margin:0; font-size:1.8rem; }
  .logout-btn { background:#dc3545; color:#fff; border:none; padding:10px 20px; border-radius:6px; cursor:pointer; float:right; margin-top:-40px; }
  main { max-width:900px; margin:20px auto; }
  section { background:#fff; padding:20px; border-radius:8px; margin-bottom:20px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
  h2 { margin-top:0; }
  .button { display:inline-block; padding:10px 20px; margin:5px; background:#007bff; color:#fff; border:none; border-radius:6px; cursor:pointer; text-decoration:none; }
  .button:hover { background:#0056b3; }
</style>
</head>
<body>

<header>
  <h1>Doctor Portal</h1>
  <button class="logout-btn" onclick="logout()">Logout</button>
  <div id="welcomeMsg" style="margin-top:10px;"></div>
</header>

<main>
  <section>
    <h2>Manage Appointments</h2>
    <p>View and manage your appointments with patients.</p>
    <a href="doctor-appointments.html" class="button">Go to Appointments</a>
  </section>

  <section>
    <h2>My Profile</h2>
    <p>View and update your profile information.</p>
    <a href="doctor-profile.html" class="button">View Profile</a>
  </section>
</main>

<script>
  // Doctor login check
  (function() {
  const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser")); // full object

  if(!loggedInUser || loggedInUser.role !== "doctor"){
    alert("Unauthorized! Please log in as an approved doctor.");
    window.location.href = "login.html";
    return;
  }

  if(loggedInUser.status !== "approved"){
    alert("Your account is not approved. Please contact admin.");
    window.location.href = "login.html";
    return;
  }

  document.getElementById("welcomeMsg").innerText = `Welcome, Dr. ${loggedInUser.username}!`;
})();

  // Logout
function logout(){
  localStorage.removeItem("loggedInUser");
  alert("You have been logged out.");
  window.location.href = "login.html";
}

</script>

</body>
</html>
